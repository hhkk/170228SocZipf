<utds-form></utds-form>

<div class="utds-list-container">
  <div class="utds-list">
    <md-card class="filter-card">
      <h3>hbk objutds list Filter Utds</h3>
      <form>
        By Location: <md-input dividerColor="primary" type="text" #searchtext placeholder="Enter Location"></md-input>
        <button md-button (click)="search(searchtext.value)">Find</button>
        <br />
        Sort by name:
        <select class="form-control" #sort (change)="changeSortOrder(sort.value)">
          <option value="1" selected>Ascending</option>
          <option value="-1">Descending</option>
        </select>
      </form>
    </md-card>

    <pagination-controls class="pagination" (pageChange)="onPageChanged($event)"></pagination-controls>

    <md-card *ngFor="let utd of utds | async" class="utd-card">
      <img *ngIf="utd.images && utd.images.length > 0" class="utd-main-image" [src]="utd | displayMainImage">
      <h2 class="utd-name">
        <a [routerLink]="['/utd', utd._id]">{{utd.name}}</a>
      </h2>
      @ {{utd.location.name}}
      <br />
      {{utd.description}}

      <button class="remove-utd" md-icon-button *ngIf="isOwner(utd)" (click)="removeUtd(utd)">
        <md-icon class="md-24">X</md-icon>
      </button>

      <div class="rsvp-container">
        <div class="rsvps-sum">
          <div class="rsvps-amount">{{utd | rsvp:'yes'}}</div>
          <div class="rsvps-title">Yes</div>
        </div>
        <div class="rsvps-sum">
          <div class="rsvps-amount">{{utd | rsvp:'maybe'}}</div>
          <div class="rsvps-title">Maybe</div>
        </div>
        <div class="rsvps-sum">
          <div class="rsvps-amount">{{utd | rsvp:'no'}}</div>
          <div class="rsvps-title">No</div>
        </div>
      </div>
    </md-card>

    <pagination-controls class="pagination" (pageChange)="onPageChanged($event)"></pagination-controls>
  </div>
  <div class="utds-map">
    <sebm-google-map
      [latitude]="0"
      [longitude]="0"
      [zoom]="1"
      class="google-map">
      <div *ngFor="let utd of utds | async">
      <sebm-google-map-marker
      *ngIf="utd.location.lat"
      [latitude]="utd.location.lat"
      [longitude]="utd.location.lng">
      </sebm-google-map-marker>
      </div>
    </sebm-google-map>
  </div>
</div>